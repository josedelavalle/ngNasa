var app=angular.module("myApp",["ngRoute","ngAnimate","ngAria","ngMessages","ngMaterial","angularMoment","ngMap"]);app.config(["$routeProvider","$locationProvider","$mdDateLocaleProvider",function(t,e,a){a.formatDate=function(t){return moment(t).format("YYYY-MM-DD")},e.html5Mode(!0),t.when("/",{templateUrl:"views/home.html"}).otherwise({redirectTo:"/"})}]),app.factory("ngNasaFactory",function(t){return apikey="sFBD6hSaJ9HBP6U8qhXaBv6v9pKcTYtICStGJlOA",{getPicOfTheDay:function(e){return t.get("https://api.nasa.gov/planetary/apod?date="+e+"&api_key="+apikey)},getSounds:function(){return t.get("https://api.nasa.gov/planetary/sounds?q=apollo&api_key=sFBD6hSaJ9HBP6U8qhXaBv6v9pKcTYtICStGJlOA")},getEpic:function(){var e="https://epic.gsfc.nasa.gov/api/images.php";return t.get(e)},getMars:function(e,a){var n="https://api.nasa.gov/mars-photos/api/v1/rovers/"+a+"/photos?earth_date="+e+"&api_key="+apikey;return t.get(n)},getImagery:function(e,a,n){var o="https://api.nasa.gov/planetary/earth/imagery?lon="+a+"&lat="+e+"&date="+n+"&cloud_score=True&api_key="+apikey;return t.get(o)},getCoordinates:function(e){return t.get(encodeURI("http://maps.googleapis.com/maps/api/geocode/json?address="+e))}}}),app.controller("appController",["$scope","$window","$filter","ngNasaFactory","geolocationSvc","NgMap",function(t,e,a,n,o,i){function r(t){return a("date")(t,"yyyy-MM-dd")}function c(e){t.showSpinner=!0,n.getPicOfTheDay(e).then(function(e){t.data=e.data,"video"==t.data.media_type&&(t.data.title="Video Support Coming Soon"),t.showSpinner=!1},function(a){t.data={title:a.data.msg,copyright:"Code: "+a.data.code,date:e,explanation:"NASA Pic of the Day unavailable for this date",url:defaultPicture},t.showSpinner=!1})}t.title=r(new Date),t.path="/",e.location.href+="#mars",notToday=!1,defaultPicture="images/earth2.jpg",t.todayDate=t.title,t.currentDate=new Date;var s="curiosity";t.initDatepicker=function(){angular.element(".md-datepicker-button").each(function(){var t=this;angular.element(t).parent().find("input").bind("click",function(e){angular.element(t).click()});angular.element(this).css("visibility","hidden")})},t.openDatePicker=function(){t.datepickerOpen=!0},t.dateChanged=function(){t.myDate=r(this.myDate),t.currentDate=this.myDate,t.title=t.myDate,checkToday(),c(t.title),l(s)},checkToday=function(){t.title!=t.todayDate?notToday=!0:notToday=!1},t.myDate=new Date,t.minDate=new Date(t.myDate.getFullYear(),t.myDate.getMonth()-2,t.myDate.getDate()),t.maxDate=new Date(t.myDate.getFullYear(),t.myDate.getMonth(),t.myDate.getDate()),t.onlyWeekendsPredicate=function(t){var e=t.getDay();return 0===e||6===e},t.pageTitle="Picture of the Day",t.headerTitle="Jose DeLavalle",t.defaultSearch="New York",t.rotate=!0,t.rotateIcon=function(){t.rotate=!t.rotate},t.goBack=function(e){e||(e=1),t.currentDate.setDate(t.currentDate.getDate()-e),t.title=r(t.currentDate),t.myDate=t.currentDate,checkToday(),c(t.title),l(s)},t.goForward=function(){notToday&&(t.currentDate.setDate(t.currentDate.getDate()+1),t.title=r(t.currentDate),t.myDate=t.currentDate,checkToday(),c(t.title),l(s))},c(t.title);var l=function(e){s=e,t.showSpinner=!0,t.mars=null,n.getMars(r(t.myDate),e).then(function(e){t.mars=e.data.photos,t.showSpinner=!1}).catch(function(e){t.mars={},t.showSpinner=!1})};t.goGetMars=l,t.goGetCoordinates=function(e){t.showSpinner=!0,n.getCoordinates(e).then(function(e){e.data.results.length>0?(t.coordinates=e.data.results[0].geometry.location,n.getImagery(t.coordinates.lat,t.coordinates.lng,t.title).then(function(e){e.data.error?t.imagery={url:"https://maps.googleapis.com/maps/api/staticmap?maptype=satellite&center="+t.coordinates.lat+","+t.coordinates.lng+"&zoom=11&size=400x400&key=AIzaSyBy34i8mK7IXxcAqmZfOEX70XZtNEt7D7s"}:t.imagery=e.data,t.showSpinner=!1})):(t.showSpinner=!1,t.imagery=null)})},t.getUserLocation=function(){t.showSpinner=!0,o.getCurrentPosition().then(function(e){t.coordinates={lat:e.coords.latitude,lng:e.coords.longitude},n.getImagery(t.coordinates.lat,t.coordinates.lng,t.title).then(function(e){t.imagery=e.data,t.showSpinner=!1},function(e){t.imagery={date:e},t.showSpinner=!1})},function(e){t.imagery={date:e.message},t.showSpinner=!1})}}]),app.factory("geolocationSvc",["$q","$window",function(t,e){"use strict";function a(){var a=t.defer();return e.navigator.geolocation?e.navigator.geolocation.getCurrentPosition(function(t){a.resolve(t)},function(t){a.reject(t)}):a.reject("Geolocation not supported."),a.promise}return{getCurrentPosition:a}}]),app.directive("slideable",function(){return{restrict:"C",compile:function(t,e){var a=t.html();return t.html('<div class="slideable_content" style="margin:0 !important; padding:0 !important" >'+a+"</div>"),function(t,e,a){a.duration=a.duration?a.duration:"1s",a.easing=a.easing?a.easing:"ease-in-out";var n="0px";if(!a.showonload){var o=content.clientHeight;n=o+"px"}e.css({overflow:"hidden",height:n,transitionProperty:"height",transitionDuration:a.duration,transitionTimingFunction:a.easing,background:"rgba(0, 0, 0, 0)"})}}}}),app.directive("slideToggle",function(){return{restrict:"A",link:function(t,e,a){var n,o;a.expanded="true"===a.expanded,e.bind("click",function(t){if(a.slideToggle?n||(n=document.querySelector(a.slideToggle)):n||(n=$(this).parent().find(".slideable")[0]),o||(o=n.querySelector(".slideable_content")),a.expanded)n.style.height="0px";else{o.style.border="1px solid rgba(0,0,0,0)";var e=o.clientHeight;o.style.border=0,n.style.height=e+"px"}a.expanded=!a.expanded})}}}),app.directive("myEnter",function(){return function(t,e,a){e.bind("keydown keypress",function(e){13===e.which&&(t.$apply(function(){t.$eval(a.myEnter)}),e.preventDefault())})}});